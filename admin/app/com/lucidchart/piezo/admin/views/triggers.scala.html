@(
triggersByGroup: scala.collection.mutable.Buffer[(String, scala.collection.immutable.List[org.quartz.TriggerKey])],
currentTrigger: Option[org.quartz.Trigger],
upcomingTriggers: List[org.quartz.Trigger],
schedulerMetadata: org.quartz.SchedulerMetaData,
errorMessage: Option[String] = None
)(
implicit
request: play.api.mvc.Request[AnyContent]
)
@import com.lucidchart.piezo.admin.controllers.{routes=>piezoRoutes}
@import com.lucidchart.piezo.admin.views
@import java.net.URLEncoder

@com.lucidchart.piezo.admin.views.html.triggersLayout(triggersByGroup, currentTrigger) {
    <h3>Select a trigger</h3>
    <table class="table table-condensed table-fixed-first-col table-bordered table-striped table-hover">
        <tbody>
        <tr>
            <td class="text-right">Scheduler name</td>
            <td>@schedulerMetadata.getSchedulerName()</td>
        </tr>
        <tr>
            <td class="text-right">Total triggers</td>
            <td>@{triggersByGroup.foldLeft(0)((a, b) => a + b._2.length)}</td>
        </tr>
        </tbody>
    </table>

    <h4>Upcoming Triggers</h4>
    <table class="table table-bordered table-striped table-hover table-condensed">
        <thead>
        <tr>
            <th>Next Fire Time</th>
            <th>Following Fire Time</th>
            <th>Trigger Group</th>
            <th>Trigger Name</th>
            <th>Job Group</th>
            <th>Job Name</th>

        </tr>
        </thead>
        <tbody>
        @upcomingTriggers.map { trigger =>
        <tr>
            <td>@trigger.getFireTimeAfter(java.util.Calendar.getInstance.getTime)</td>
            <td>@trigger.getFireTimeAfter(trigger.getFireTimeAfter(java.util.Calendar.getInstance.getTime))</td>
            <td>@trigger.getKey.getGroup</td>
            <td>@trigger.getKey.getName</td>
            <td>@trigger.getJobKey.getGroup</td>
            <td>@trigger.getJobKey.getName</td>

        </tr>
        }
        </tbody>
    </table>
}